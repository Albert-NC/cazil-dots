# ==============================================================================
# CAZIL - HYPRIDLE CONFIGURATION
# Gestión de inactividad y ahorro de energía
# Ubicación: ~/.config/hypr/hypridle.conf
# ==============================================================================

general {
    lock_cmd = pidof hyprlock || hyprlock       # Evita múltiples instancias
    before_sleep_cmd = loginctl lock-session    # Bloquea antes de suspender
    after_sleep_cmd = hyprctl dispatch dpms on  # Enciende pantalla al despertar
    ignore_dbus_inhibit = false                 # Respeta inhibidores (ej: videos)
}

# --------------------------------------------------------------------------
# LISTENER 1: Dimming de pantalla (advertencia)
# --------------------------------------------------------------------------
listener {
    timeout = 240                               # 4 minutos
    on-timeout = brightnessctl -s set 10%       # Baja brillo a 10%
    on-resume = brightnessctl -r                # Restaura brillo original
}

# --------------------------------------------------------------------------
# LISTENER 2: Bloqueo de pantalla
# --------------------------------------------------------------------------
listener {
    timeout = 300                               # 5 minutos
    on-timeout = loginctl lock-session          # Activa hyprlock
}

# --------------------------------------------------------------------------
# LISTENER 3: Apagar pantalla (DPMS off)
# --------------------------------------------------------------------------
listener {
    timeout = 330                               # 5.5 minutos (30s después del bloqueo)
    on-timeout = hyprctl dispatch dpms off      # Apaga pantalla
    on-resume = hyprctl dispatch dpms on        # Enciende al mover ratón/teclado
}

# --------------------------------------------------------------------------
# LISTENER 4: Suspender sistema (solo en laptop, no en gaming)
# --------------------------------------------------------------------------
listener {
    timeout = 600                               # 10 minutos
    on-timeout = systemctl suspend              # Suspende el sistema (RAM)
}

# NOTA: Si estás jugando o reproduciendo video, los inhibidores
#       de D-Bus evitarán que se active (ignore_dbus_inhibit = false)